<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø§Ø³ØªØ¹Ù„Ø§Ù… Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø·Ø§Ù„Ø¨</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    body{margin:0;font-family:'Cairo',sans-serif;background:linear-gradient(135deg,#0b2a66,#1a73e8);color:#fff}
    .container{max-width:900px;margin:40px auto;padding:20px;background:rgba(255,255,255,0.08);border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.3)}
    h1{text-align:center;margin-bottom:20px}
    label{display:block;margin:10px 0 5px}
    input{width:100%;padding:10px;border:none;border-radius:8px;margin-bottom:10px}
    button{padding:10px 18px;border:none;border-radius:8px;background:#ffd166;color:#06223a;font-weight:bold;cursor:pointer}
    .result{margin-top:20px;padding:15px;background:rgba(255,255,255,0.1);border-radius:10px}
    .row{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid rgba(255,255,255,0.1)}
    .row:last-child{border-bottom:none}
    .label{color:#ffd166}
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ’° Ø§Ø³ØªØ¹Ù„Ø§Ù… Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø·Ø§Ù„Ø¨</h1>
    <label for="nid">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ</label>
    <input id="nid" type="text" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ Ù‡Ù†Ø§" />
    <button onclick="lookup()">Ø¹Ø±Ø¶ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</button>
    <div id="result" class="result" style="display:none"></div>
  </div>

  <script>
    const APP_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwMxgo6lxW8FmdVONPAalu9j0Lqq4aLcH9ycjvYJ4h3-KL1KgX-QOQAznKPN-shZRmc/exec'; // â† Ø­Ø· Ø±Ø§Ø¨Ø· Web App Ù‡Ù†Ø§

    async function lookup(){
      const nid = document.getElementById('nid').value.trim();
      if(!nid){alert('Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ');return;}
      try{
        const resp = await fetch(`${APP_SCRIPT_URL}?action=lookup&id=${encodeURIComponent(nid)}`);
        const data = await resp.json();
        const box = document.getElementById('result');
        if(data.found){
          const acc = data.account;
          box.style.display='block';
          box.innerHTML = `
            <div class="row"><div class="label">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨:</div><div>${acc.student_name||'-'}</div></div>
            <div class="row"><div class="label">Ø§Ù„Ù…Ø±Ø­Ù„Ø©:</div><div>${acc.stage||'-'}</div></div>
            <div class="row"><div class="label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª:</div><div>${acc.total_fees||'-'}</div></div>
            <div class="row"><div class="label">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹:</div><div>${acc.paid_amount||'-'}</div></div>
            <div class="row"><div class="label">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ:</div><div>${acc.remaining||'-'}</div></div>
            <div class="row"><div class="label">Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯ÙØ¹:</div><div>${acc.payment_plan||'-'}</div></div>
            <div class="row"><div class="label">Ø§Ù„Ù…Ø¹Ø§Ø¯ Ø§Ù„Ù‚Ø§Ø¯Ù… Ù„Ù„Ø¯ÙØ¹:</div><div>${acc.next_due_date||'-'}</div></div>
            <div class="row"><div class="label">Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</div><div>${acc.notes||'-'}</div></div>
          `;
        }else{
          box.style.display='block';
          box.innerHTML = `<div style="color:#ff8080">âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ</div>`;
        }
      }catch(err){
        alert('Ø­ØµÙ„ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù€ API');
        console.error(err);
      }
    }
  </script>
</body>
</html>
